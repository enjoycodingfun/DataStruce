//ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½ çš„ä»»åŠ¡æ˜¯è®¡ç®—è¿™ä¸ªå­—ç¬¦ä¸²ä¸­æœ‰å¤šå°‘ä¸ªå›æ–‡å­ä¸²ã€‚ 
//
// å…·æœ‰ä¸åŒå¼€å§‹ä½ç½®æˆ–ç»“æŸä½ç½®çš„å­ä¸²ï¼Œå³ä½¿æ˜¯ç”±ç›¸åŒçš„å­—ç¬¦ç»„æˆï¼Œä¹Ÿä¼šè¢«è§†ä½œä¸åŒçš„å­ä¸²ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// è¾“å…¥ï¼š"abc"
//è¾“å‡ºï¼š3
//è§£é‡Šï¼šä¸‰ä¸ªå›æ–‡å­ä¸²: "a", "b", "c"
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// è¾“å…¥ï¼š"aaa"
//è¾“å‡ºï¼š6
//è§£é‡Šï¼š6ä¸ªå›æ–‡å­ä¸²: "a", "a", "a", "aa", "aa", "aaa" 
//
// 
//
// æç¤ºï¼š 
//
// 
// è¾“å…¥çš„å­—ç¬¦ä¸²é•¿åº¦ä¸ä¼šè¶…è¿‡ 1000 ã€‚ 
// 
// Related Topics å­—ç¬¦ä¸² åŠ¨æ€è§„åˆ’ 
// ğŸ‘ 434 ğŸ‘ 0


package leetcode.editor.cn;

//Javaï¼šå›æ–‡å­ä¸²
public class P647å›æ–‡å­ä¸² {

    public static void main(String[] args) {
        Solution solution = new P647å›æ–‡å­ä¸²().new Solution();
        // TO TEST
    }

    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {

        public int countSubstrings(String s) {

            if (s == null || s.length() == 0) {
                return 0;
            }
            //return method1(s);
            return method2(s);


        }

        /**
         * æ–¹æ³•ä¸€ï¼šåŠ¨æ€è§„åˆ’
         * https://leetcode-cn.com/problems/palindromic-substrings/solution/liang-dao-hui-wen-zi-chuan-de-jie-fa-xiang-jie-zho/
         * dp[i][j]å®šä¹‰ä¸ºåœ¨å­—ç¬¦ä¸²ä¸­[i,j]åŒºé—´çš„å­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡å­ä¸²ï¼Œå®ƒæ˜¯å›æ–‡å­ä¸²çš„æ¡ä»¶æ˜¯s[i]==s[j]&&((j-i<2)||dp[i+1][j-1])
         * j-i<2å‰æi<=jï¼Œæ‰€ä»¥è¦ä¹ˆi=j,æ˜¯å•ä¸ªå­—ç¬¦ä¸²ï¼Œç®—å›æ–‡å­ä¸²ï¼Œè¦ä¹ˆj-i=1,æ˜¯ä¸¤ä¸ªç›¸åŒçš„å­—æ¯ï¼Œä¹Ÿæ˜¯å›æ–‡å­ä¸²ï¼Œè€Œå½“åŒºé—´[i+1,j-1]ä¹‹é—´çš„å­ä¸²æ˜¯å›æ–‡å­ä¸²çš„æ—¶å€™
         * åœ¨å…¶ä¸¤è¾¹åŠ ä¸Šä¸¤ä¸ªç›¸ç­‰çš„å­—ç¬¦ä¹Ÿä¸€å®šæ˜¯å›æ–‡å­ä¸²
         * è¯¥æ–¹æ³•æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦å‡ä¸ºO(N2)
         */
        private int method1(String s) {
            boolean[][] dp = new boolean[s.length()][s.length()];
            int count = 0;
            for (int right = 0; right < s.length(); right++) {
                for (int left = 0; left <= right; left++) {
                    if (s.charAt(left) == s.charAt(right)&&((right-left)<2||dp[left+1][right-1])){
                        dp[left][right] = true;
                        count++;
                    }
                }
            }
            return count;
        }

        /**
         * æ–¹æ³•äºŒï¼šä¸­å¿ƒæ‰©å±•æ³•
         * æ€è·¯ï¼šå¯¹äºä¸€ä¸ªå­—ç¬¦ä¸²æˆ‘ä»¬åªè¦ç©·ä¸¾å‡ºæ‰€æœ‰çš„å›æ–‡ä¸­å¿ƒï¼Œç„¶åç”±å›æ–‡ä¸­å¿ƒä¸¤è¾¹æ‰©å±•åˆ¤å®šæ˜¯å¦æ˜¯å›æ–‡å­—ç¬¦ä¸²å°±å¯ä»¥ï¼Œä½†æ˜¯å›æ–‡å­—ç¬¦ä¸²ä¸­å¿ƒå’Œå·¦å³æŒ‡é’ˆçš„å…³ç³»æˆ‘ä»¬éœ€è¦ç¡®è®¤ï¼ˆå¯ä»¥çœ‹å…¶ä»–é¢˜è§£ç†è§£ä»€ä¹ˆæ˜¯ä¸­å¿ƒæ‰©å±•æ³•ï¼‰
         * å‡è®¾å­—ç¬¦ä¸²ä¸ºabcd,é‚£ä¹ˆå®ƒå¯èƒ½çš„ä¸­å¿ƒæœ‰2*length-1ä¸­ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿé¦–å…ˆå›æ–‡ä¸­å¿ƒåªæœ‰å¯èƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦æˆ–è€…ä¸¤ä¸ªå­—ç¬¦ï¼ˆä¸‰ä¸ªæˆ–æ›´å¤šéƒ½æœ‰èƒ½ç”±ä¸€ä¸ªå­—ç¬¦å’Œä¸¤ä¸ªåˆå§‹å­—ç¬¦å‘ä¸¤è¾¹æ‰©å±•å¾—åˆ°ï¼‰
         * æ¯ä¸ªå•ä¸ªå­—ç¬¦ä½œä¸ºå›æ–‡ä¸­å¿ƒï¼ˆa,b,c,dï¼‰ï¼Œé‚£ä¹ˆæ€»å…±æœ‰lengthä¸ªå›æ–‡ä¸­å¿ƒï¼Œæ¯ä¸ªåŒå­—ç¬¦ä½œä¸ºå›æ–‡ä¸­å¿ƒï¼ˆab,bc,cdï¼‰é‚£ä¹ˆä¸€å…±æœ‰length-1ä¸ªï¼Œæ‰€ä»¥æ€»å…±æœ‰2*length-1ä¸ª
         * ä¸‹é¢å†çœ‹éå†è¿‡ç¨‹ä¸­æ¯ä¸ªä¸­å¿ƒå’Œå·¦å³æŒ‡é’ˆçš„å…³ç³»ï¼Œå› ä¸ºå›æ–‡ä¸­å¿ƒå…±æœ‰2*length-1ä¸ªï¼Œé‚£ä¹ˆå›æ–‡ä¸­å¿ƒéå†æ—¶å€™æ˜¯ä»0-2*length-2éå†ï¼Œæˆ‘ä»¬ä¸€æ¬¡æ€§å°†å›æ–‡ä¸­å¿ƒæ˜¯ä¸€ä¸ªå­—ç¬¦å’Œä¸¤
         * ä¸ªå­—ç¬¦çš„éƒ½éå†å‡ºæ¥ï¼Œä¸‹é¢æ˜¯å…·ä½“ä¾‹å­
         * æ³¨æ„ï¼šå…¶ä¸­å›æ–‡ä¸­å¿ƒç¼–å·èŒƒå›´æ˜¯0-2*length-2å…±è®¡2*length-1ä¸ªï¼›å·¦å³æŒ‡é’ˆçš„ç¼–å·æ˜¯ç›¸å¯¹äºå­—ç¬¦ä¸²å­—ç¬¦ä½ç½®è¯´çš„ï¼ŒèŒƒå›´æ˜¯0-å­—ç¬¦ä¸²é•¿åº¦-1ï¼›ä»–ä¸¤æ˜¯ä¸åŒçš„ç»´åº¦
         * å›æ–‡ä¸­å¿ƒç¼–å·(center)   ä¸­å¿ƒå€¼  åˆå§‹åŒ–å·¦æŒ‡é’ˆ    åˆå§‹åŒ–å·¦æŒ‡é’ˆç¼–å·(left)   åˆå§‹åŒ–å³æŒ‡é’ˆ    åˆå§‹åŒ–å³æŒ‡é’ˆç¼–å·(right)
         *    0                   a        a             0                       a              0
         *    1                  ab        a             0                       b              1
         *    2                   b        b             1                       b              1
         *    3                  bc        b             1                       c              2
         *    4                   c        c             2                       c              2
         *    5                  cd        c             2                       d              3
         *    6                   d        d             3                       d              3
         *ä»ä¸Šé¢çš„å…³ç³»å¯ä»¥çœ‹å‡ºï¼Œå›æ–‡ä¸­å¿ƒç¼–å·centerä¸å·¦å³æŒ‡é’ˆleftå’Œrightçš„å…³ç³»å¦‚ä¸‹ï¼šleft=center/2 right=left+(center%2)
         */
        private int method2(String s) {
            int len = s.length();
            int num = 0;
            for (int center = 0; center < 2 * len - 1; center++) {
                int left = center/2;
                int right = left+(center%2);
                while (left>=0&&right<=len-1&&s.charAt(left)==s.charAt(right)){
                    num++;
                    left--;
                    right++;
                }
            }
            return num;
        }

    }
//leetcode submit region end(Prohibit modification and deletion)

}
