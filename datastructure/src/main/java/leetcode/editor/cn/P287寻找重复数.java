//ç»™å®šä¸€ä¸ªåŒ…å« n + 1 ä¸ªæ•´æ•°çš„æ•°ç»„ nums ï¼Œå…¶æ•°å­—éƒ½åœ¨ 1 åˆ° n ä¹‹é—´ï¼ˆåŒ…æ‹¬ 1 å’Œ nï¼‰ï¼Œå¯çŸ¥è‡³å°‘å­˜åœ¨ä¸€ä¸ªé‡å¤çš„æ•´æ•°ã€‚ 
//
// å‡è®¾ nums åªæœ‰ ä¸€ä¸ªé‡å¤çš„æ•´æ•° ï¼Œæ‰¾å‡º è¿™ä¸ªé‡å¤çš„æ•° ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼šnums = [1,3,4,2,2]
//è¾“å‡ºï¼š2
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼šnums = [3,1,3,4,2]
//è¾“å‡ºï¼š3
// 
//
// ç¤ºä¾‹ 3ï¼š 
//
// 
//è¾“å…¥ï¼šnums = [1,1]
//è¾“å‡ºï¼š1
// 
//
// ç¤ºä¾‹ 4ï¼š 
//
// 
//è¾“å…¥ï¼šnums = [1,1,2]
//è¾“å‡ºï¼š1
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 2 <= n <= 3 * 104 
// nums.length == n + 1 
// 1 <= nums[i] <= n 
// nums ä¸­ åªæœ‰ä¸€ä¸ªæ•´æ•° å‡ºç° ä¸¤æ¬¡æˆ–å¤šæ¬¡ ï¼Œå…¶ä½™æ•´æ•°å‡åªå‡ºç° ä¸€æ¬¡ 
// 
//
// 
//
// è¿›é˜¶ï¼š 
//
// 
// å¦‚ä½•è¯æ˜ nums ä¸­è‡³å°‘å­˜åœ¨ä¸€ä¸ªé‡å¤çš„æ•°å­—? 
// ä½ å¯ä»¥åœ¨ä¸ä¿®æ”¹æ•°ç»„ nums çš„æƒ…å†µä¸‹è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ 
// ä½ å¯ä»¥åªç”¨å¸¸é‡çº§ O(1) çš„é¢å¤–ç©ºé—´è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ 
// ä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦å°äº O(n2) çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ 
// 
// Related Topics æ•°ç»„ åŒæŒ‡é’ˆ äºŒåˆ†æŸ¥æ‰¾ 
// ğŸ‘ 1039 ğŸ‘ 0


package leetcode.editor.cn;

import java.util.Arrays;

//Javaï¼šå¯»æ‰¾é‡å¤æ•°
public class P287å¯»æ‰¾é‡å¤æ•°{
    public static void main(String[] args) {
        Solution solution = new P287å¯»æ‰¾é‡å¤æ•°().new Solution();
        // TO TEST
    }
    //leetcode submit region begin(Prohibit modification and deletion)

    /**
     * äºŒåˆ†æ³•
     *
     */
    class Solution {
    public int findDuplicate(int[] nums) {
        //return method1(nums);
        //return method2(nums);
        return method3(nums);

    }

        /**
         * äºŒåˆ†æŸ¥æ‰¾æ³•ï¼š
         * https://leetcode-cn.com/problems/find-the-duplicate-number/solution/er-fen-fa-si-lu-ji-dai-ma-python-by-liweiwei1419/
         *
         * ç¬¬ä¸€é¡µè¯„è®ºåŒºåŸä½œè€…å›å¤JerryChaoxçš„æ€æƒ³
         * ä¸æ˜¯å¤§ä½¬ã€‚æˆ‘è®¤ä¸ºï¼šå¼„ä¸æ¸…æ¥šè¾¹ç•Œæ¡ä»¶ï¼Œæ˜¯ä¸å¤ªè®¤çœŸï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯åœ¨èƒŒæ¨¡æ¿ï¼Œæ²¡æœ‰ææ¸…æ¥šé‡Œé¢éå¸¸ç»†èŠ‚çš„åœ°æ–¹ã€‚
         *
         * ä¸‹é¢æåˆ°çš„ä¸€äº›ç‚¹å¯èƒ½ä¸æ˜¯æ‚¨å­˜åœ¨çš„é—®é¢˜ï¼Œå¦‚æœè®²å¾—è¿‡åˆ†äº†ï¼Œè¿˜è¯·æ‚¨è°…è§£ï¼Œåœ¨è¿™é‡Œç»™åŒæ ·æœ‰é—®é¢˜çš„æœ‹å‹æä¸ªé†’ï¼š
         *
         * æˆ‘çš„ç»éªŒæ˜¯æŠŠå®šä¹‰åŒºé—´æˆä¸ºå·¦é—­å³é—­åŒºé—´ï¼Œå·¦å³è¾¹ç•Œæ˜¯æ— å·®åˆ«çš„ï¼Œå¼„æˆå·¦é—­å³å¼€ï¼Œåè€Œå¢åŠ äº†æ€è€ƒçš„å¤æ‚ç¨‹åº¦ï¼›
         * æ˜ç¡® int = left + ( right - left ) / 2 è¿™é‡Œé™¤ä»¥ 2 æ˜¯ä¸‹å–æ•´ï¼›
         * æ˜ç¡® while(left <= right) å’Œ while(left < right) è¿™ä¸¤ç§å†™æ³•å…¶å®åœ¨æ€è·¯ä¸Šæœ‰æœ¬è´¨å·®åˆ«ï¼Œ while(left <= right) åœ¨å¾ªç¯ä½“å†…éƒ¨ç›´æ¥æŸ¥æ‰¾å…ƒç´ ï¼Œè€Œ while
         * (left < right) åœ¨å¾ªç¯ä½“å†…éƒ¨ä¸€ç›´åœ¨æ’é™¤å…ƒç´ ï¼Œç¬¬ 2 ç§æ€è·¯åœ¨è§£å†³å¤æ‚é—®é¢˜çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿å¾—é—®é¢˜å˜å¾—ç®€å•ï¼›
         * å§‹ç»ˆåœ¨æ€è€ƒä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ä»€ä¹ˆï¼ŒæŠŠå®ƒä½œä¸ºæ³¨é‡Šå†™åˆ°ä»£ç é‡Œé¢ï¼Œå°±èƒ½å¸®åŠ©æˆ‘ä»¬ææ¸…æ¥šè¾¹ç•Œæ˜¯ä¸æ˜¯èƒ½å–åˆ°ï¼Œç­‰äºã€+1 ã€-1 ä¹‹ç±»çš„ç»†èŠ‚ï¼›
         * æ€è€ƒæ¸…æ¥šæ¯ä¸€è¡Œä»£ç èƒŒåçš„è¯­ä¹‰æ˜¯ä»€ä¹ˆï¼Œä¿è¯è¯­ä¹‰ä¸Šæ¸…æ™°ï¼Œä¹Ÿæ˜¯å†™å¯¹ä»£ç ï¼Œå‡å°‘ bug çš„ä¸€ä¸ªéå¸¸æœ‰æ•ˆçš„ç­–ç•¥ã€‚
         * åœ¨ä¸‹é¢çš„è§†é¢‘é¢˜è§£é‡Œï¼Œæˆ‘éƒ½éå¸¸å…·ä½“åœ°è®²è§£äº†æˆ‘æ˜¯æ€ä¹ˆåˆ†æå’ŒåšäºŒåˆ†æŸ¥æ‰¾é—®é¢˜çš„ã€‚
         *
         * äºŒåˆ†æŸ¥æ‰¾ä¸éš¾ï¼Œåªæ˜¯åœ¨è€ƒå¯Ÿæˆ‘ä»¬æ˜¯å¦ç»†å¿ƒï¼Œå¦‚æœé¢è¯•ä¸­é‡åˆ°ï¼Œæ˜¯ä¸€å®šè¦æ‹¿ä¸‹çš„ã€‚
         *
         * ç¬¬ 35 é¢˜ï¼šé¢˜è§£ï¼›
         *
         * ç¬¬ 1095 é¢˜ï¼šå®˜æ–¹é¢˜è§£ï¼›
         *
         * ç¬¬ 4 é¢˜ï¼šå®˜æ–¹é¢˜è§£ã€‚
         *
         * ä¸‹é¢æ˜¯éå¸¸é‡è¦çš„ä¸€ç‚¹ï¼Œå¸Œæœ›èƒ½å¯¹çœ‹åˆ°çš„æœ‹å‹æœ‰å¸®åŠ©ï¼Œæˆ‘å†™ä¸‰éï¼š
         *
         * å…ˆææ‡‚æ€è·¯ï¼Œå†ç ”ç©¶ç»†èŠ‚ï¼Œå¤šåšé—®é¢˜å»åº”ç”¨ã€‚
         * å…ˆææ‡‚æ€è·¯ï¼Œå†ç ”ç©¶ç»†èŠ‚ï¼Œå¤šåšé—®é¢˜å»åº”ç”¨ã€‚
         * å…ˆææ‡‚æ€è·¯ï¼Œå†ç ”ç©¶ç»†èŠ‚ï¼Œå¤šåšé—®é¢˜å»åº”ç”¨ã€‚
         * ä¸ªäººæ„è§ï¼Œä»…ä¾›å‚è€ƒã€‚
         * @param nums
         * @return
         */
        private int method3(int[] nums) {
            int left = 1;
            int right = nums.length-1;
            while (left < right){
                int mid = left + (right-left)/2;
                //å…ˆç»Ÿè®¡å°äºç­‰äºmidçš„å…ƒç´ ä¸ªæ•°ï¼Œå¦‚æœè¿™ä¸ªå…ƒç´ ä¸ªæ•°å¤§äºmidï¼Œé‚£é‡å¤å…ƒç´ ä¸€å®šåœ¨[left,mid]ä¹‹é—´
                int count = 0;
                for (int num : nums) {
                    if (num <= mid){
                        count++;
                    }
                }
                if (count > mid){
                    //è¯´æ˜é‡å¤å…ƒç´ åœ¨[leftï¼Œmid]ä¹‹é—´
                    right = mid;
                }else{
                    //é‡å¤å…ƒç´ åœ¨[mid+1ï¼Œright]ä¹‹é—´
                    left = mid + 1;
                }
            }
            return left;
        }

        /**
         * ä½¿ç”¨æ•°ç»„æˆ–è€…hashè¡¨
         * @param nums
         * @return
         */
        private int method2(int[] nums) {
            int[] res = new int[nums.length+1];
            for (int num : nums) {
                if (res[num] > 0){
                    return num;
                }else{
                    res[num] += 1;
                }
            }
            return 0;
        }

        /**
         * æš´åŠ›æ³•
         * @param nums
         * @return
         */
        private int method1(int[] nums) {
            Arrays.sort(nums);
            for (int i = 1; i < nums.length; i++) {
                if (nums[i] == nums[i-1]){
                    return nums[i];
                }
            }
            return 0;
        }

    }
//leetcode submit region end(Prohibit modification and deletion)

}
